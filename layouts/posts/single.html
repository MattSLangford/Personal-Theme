{{ define "main" }}
<article class="post-single">
  <header class="post-header">
    {{ if .Date }}
    <time class="post-date" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
      {{ .Date.Format "Monday, January 2, 2006 at 3:04 PM" }}
    </time>
    {{ end }}

    {{ if .Title }}
    <h1 class="post-title">{{ .Title }}</h1>
    {{ end }}

    {{ if .Params.categories }}
    <div class="post-categories">
      {{ range .Params.categories }}
      <a href="/categories/{{ . | urlize }}" class="category-tag">#{{ . }}</a>
      {{ end }}
    </div>
    {{ end }}
  </header>

  <div class="post-content">
    {{ if .Params.photos }}
      {{ if eq (len .Params.photos) 1 }}
        <img src="{{ index .Params.photos 0 }}" alt="">
      {{ else }}
        <div class="photos">
          {{ range .Params.photos }}
            <img src="{{ . }}" alt="">
          {{ end }}
        </div>
      {{ end }}
    {{ end }}

    {{ .Content }}
  </div>

  {{ if .Params.tags }}
  <div class="post-tags">
    <h3>Tagged with:</h3>
    <div class="tag-list">
      {{ range .Params.tags }}
      <a href="/tags/{{ . | urlize }}" class="category-tag">{{ . }}</a>
      {{ end }}
    </div>
  </div>
  {{ end }}

  {{ if or .Site.Params.include_conversation .Site.Params.show_reply_links }}
  <div class="reply-buttons">
    {{ if .Params.reply_url }}
    <a href="{{ .Params.reply_url }}" class="reply-button">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"/>
      </svg>
      Reply on Micro.blog
    </a>
    {{ end }}
    
    <a href="https://twitter.com/intent/tweet?text={{ .Title | urlquery }}&url={{ .Permalink }}" target="_blank" class="reply-button">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
        <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
      </svg>
      Share on Twitter
    </a>
    
    <a href="https://micro.blog/{{ .Site.Params.microblog.username }}" target="_blank" class="reply-button">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 0C5.37 0 0 4.59 0 10.25c0 2.25.75 4.33 2 6L0 24l7.75-2c1.67.25 3.5.25 5.25 0C18.63 22 24 17.41 24 11.75 24 5.09 18.63 0 12 0z"/>
      </svg>
      Discuss on Micro.blog
    </a>
  </div>
  {{ end }}

  {{ if .Site.Params.include_conversation }}
  <div class="conversation-section">
    {{ partial "microblog_conversation.html" . }}
  </div>
  {{ end }}

  <nav class="post-navigation">
    {{ if .PrevInSection }}
    <a href="{{ .PrevInSection.Permalink }}" class="nav-previous">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
      </svg>
      <div>
        <div class="nav-label">Previous</div>
        <div class="nav-title">{{ .PrevInSection.Title | default "Previous Post" }}</div>
      </div>
    </a>
    {{ end }}
    
    {{ if .NextInSection }}
    <a href="{{ .NextInSection.Permalink }}" class="nav-next">
      <div>
        <div class="nav-label">Next</div>
        <div class="nav-title">{{ .NextInSection.Title | default "Next Post" }}</div>
      </div>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
      </svg>
    </a>
    {{ end }}
  </nav>
</article>
{{ end }}