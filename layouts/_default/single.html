{{ define "main" }}
<article class="post-single">
  <header class="post-header">
    {{ if .Date }}
    <time class="post-date" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
      {{ .Date.Format "Monday, January 2, 2006" }}
    </time>
    {{ end }}

    {{ if .Title }}
    <h1 class="post-title">{{ .Title }}</h1>
    {{ end }}

    {{ if .Params.categories }}
    <div class="post-categories">
      {{ range .Params.categories }}
      <a href="/categories/{{ . | urlize }}" class="category-tag">#{{ . }}</a>
      {{ end }}
    </div>
    {{ end }}
  </header>

  <div class="post-content">
    {{ if .Params.photos }}
      {{ if eq (len .Params.photos) 1 }}
        <img src="{{ index .Params.photos 0 }}" alt="">
      {{ else }}
        <div class="photos">
          {{ range .Params.photos }}
            <img src="{{ . }}" alt="">
          {{ end }}
        </div>
      {{ end }}
    {{ end }}

    {{ .Content }}
  </div>

  {{ if .Params.tags }}
  <div class="post-tags">
    <h3>Tagged with:</h3>
    <div class="tag-list">
      {{ range .Params.tags }}
      <a href="/tags/{{ . | urlize }}" class="category-tag">{{ . }}</a>
      {{ end }}
    </div>
  </div>
  {{ end }}

  {{ if or .Site.Params.include_conversation .Site.Params.show_reply_links }}
  <div class="reply-buttons">
    {{ if .Params.reply_url }}
    <a href="{{ .Params.reply_url }}" class="reply-button">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"/>
      </svg>
      Reply by Email
    </a>
    {{ end }}
  </div>
  {{ end }}

  {{ if .Site.Params.include_conversation }}
  <div class="conversation-section">
    {{ partial "microblog_conversation.html" . }}
  </div>
  {{ end }}

  {{ if ne .Type "page" }}
  <nav class="post-navigation">
    {{ if .PrevInSection }}
    <a href="{{ .PrevInSection.Permalink }}" class="nav-previous">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
      </svg>
      <div>
        <div class="nav-label">Previous</div>
        <div class="nav-title">{{ .PrevInSection.Title | default "Previous Post" }}</div>
      </div>
    </a>
    {{ end }}
    
    {{ if .NextInSection }}
    <a href="{{ .NextInSection.Permalink }}" class="nav-next">
      <div>
        <div class="nav-label">Next</div>
        <div class="nav-title">{{ .NextInSection.Title | default "Next Post" }}</div>
      </div>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
      </svg>
    </a>
    {{ end }}
  </nav>
  {{ end }}
</article>
{{ end }}